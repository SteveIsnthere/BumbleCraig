<mat-card *ngIf="post?.popularity != null; else loadingBar">
  <mat-card-header (click)="openPostFullView()" style="cursor: pointer">
    <app-user-mini mat-card-avatar [userID]="post?.author_id!"></app-user-mini>
    <mat-card-title style="color: antiquewhite;overflow-wrap: break-word;">{{post?.title}}</mat-card-title>
    <mat-card-subtitle id="post-details-row">
      <mat-chip-option selectable="false">{{post!.genre}}</mat-chip-option>
      {{post!.time_since_posted}}
    </mat-card-subtitle>
  </mat-card-header>


  <mat-card-content (click)="openPostFullView()">
    <p *ngFor="let content of postPreviewContents">
      <ng-container *ngIf="content.file_share_id != 0; else textMsg">
        <app-file-share [fileShareID]=content.file_share_id [interactive]="false" class="file-content"></app-file-share>
      </ng-container>
      <ng-template #textMsg>
        <span class="text-content">{{content.content}}</span>
      </ng-template>
    </p>
  </mat-card-content>


  <mat-card-actions>
    <app-post-perception-bar [popularity]="post?.popularity!" [rating]="post?.rating!" (click)="openPostFullView()"
                             style="flex: 1"></app-post-perception-bar>
    <div id="comment-section" (click)="openCommentSection()">
      <span style="margin-right: 3px">{{post?.number_of_comments}}</span>
      <mat-icon style="vertical-align: middle;">comment</mat-icon>
    </div>
  </mat-card-actions>
</mat-card>

<ng-template #loadingBar>
  <mat-card style="height: 400px;">
    <!--<mat-progress-bar mode="indeterminate"></mat-progress-bar>-->
  </mat-card>
</ng-template>
