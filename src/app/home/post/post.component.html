<mat-card *ngIf="post?.popularity != null; else loadingBar" [ngClass]="touchMode ? '' : 'desktopStyleClass'">
  <mat-card-header style="cursor: pointer;">
    <app-user-mini mat-card-avatar [userID]="post?.author_id!"></app-user-mini>
    <mat-card-title style="color: white;overflow-wrap: break-word;font-size: large;"
                    (click)="openPostFullView()">{{ post?.title }}
    </mat-card-title>
    <mat-card-subtitle>
      <span>{{ post!.time_since_posted }}</span>
      <app-post-perception-bar [popularity]="post?.popularity!" [rating]="post?.rating!" (click)="openPostFullView()"
                               style="flex: 1;"></app-post-perception-bar>
      <button mat-stroked-button color="accent" (click)="openCommentSection()"
              style="border-radius: 11px; border: none">
        <mat-icon>comment</mat-icon>
        <span>{{ post?.number_of_comments }}</span>
      </button>
    </mat-card-subtitle>
  </mat-card-header>


  <mat-card-content (click)="openPostFullView()">
    <!--    <mat-card-subtitle id="post-details-row">-->
    <!--      <span>{{post!.genre}}</span>-->
    <!--      <span>{{post!.time_since_posted}}</span>-->
    <!--    </mat-card-subtitle>-->
    <ng-container *ngIf="textAttachments.length > 0">
      <!--      <span><mat-divider></mat-divider></span>-->
      <div style="height: 5px"></div>
    </ng-container>


    <p *ngFor="let content of textAttachments">
      <span class="text-content">{{ content.content }}</span>
    </p>

    <div style="border-radius: 10px; overflow: hidden">
      <app-post-files-viewer [files]="fileAttachments" *ngIf="fileAttachments.length > 0"></app-post-files-viewer>
    </div>
  </mat-card-content>


  <!--  <mat-card-actions>-->
  <!--    <button mat-stroked-button color="accent" (click)="openCommentSection()" style="border-radius: 100px">-->
  <!--      &lt;!&ndash;        <mat-icon>comment</mat-icon>&ndash;&gt;-->
  <!--      <span>{{ post?.number_of_comments }} {{ post?.number_of_comments! > 1 ? 'Comments' : 'Comment' }}</span>-->
  <!--    </button>-->

  <!--    <div style="flex: 1"></div>-->

  <!--    <button mat-icon-button color="accent" (click)="writeComment()">-->
  <!--      <mat-icon>rate_review</mat-icon>-->
  <!--      &lt;!&ndash;        Comment&ndash;&gt;-->
  <!--    </button>-->
  <!--  </mat-card-actions>-->
</mat-card>

<ng-template #loadingBar>
</ng-template>
