<main>
  <app-home-button (click)="this.main.fetchNotifications().subscribe()"></app-home-button>

  <div id="top-bar">
    <button mat-stroked-button (click)="createGroup()" color="primary" style="border-radius: 200px">
      <mat-icon>add_circle</mat-icon>
      Create New
    </button>

    <ng-container *ngIf="!editMode; else checkBtn">
      <button mat-stroked-button (click)="editMode = !editMode" color="warn"
              style="border-radius: 200px;">
        <mat-icon>delete</mat-icon>
        Quit Group
      </button>
    </ng-container>
    </div>
    <ng-template #checkBtn>
    <button mat-stroked-button (click)="editMode = !editMode" color="warn"
            style="border-radius: 200px;">
      <mat-icon>check</mat-icon>
      Done
    </button>
  </ng-template>

  <div id="group-list" *ngIf="loadingComplete; else loadingBar">
    <div class="group-row" *ngFor="let groupID of groupIDs">
      <button mat-mini-fab *ngIf="editMode" (click)="leaveGroup(groupID)" color="primary">
        <mat-icon>delete</mat-icon>
      </button>
      <app-group [groupID]="groupID" [selfID]="auth.selfUserID" [unread]=isGroupUnread(groupID)
                 style="flex: 1;max-width: 310px;"></app-group>
    </div>
  </div>

  <app-background></app-background>

  <ng-template #loadingBar>
    <mat-progress-bar mode="indeterminate" style="position: fixed; top: 0; left: 0"></mat-progress-bar>
  </ng-template>
</main>
